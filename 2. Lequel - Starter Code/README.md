# EDA #level2: Lequel?

## Integrantes del grupo y contribución al trabajo de cada integrante

Sambucetti Juan Manuel
Schiaffino Ariana
Optamos por trabajar en grupo, por lo que la contribución es conjunta.


## Respuestas del enunciado

1. ¿En qué idioma está el siguiente texto?

історія земель сучасної України, українського народу та інших національностей, що проживають на території України, від доісторичних часів до сьогодення.

Ucraniano

2. ¿En qué idioma está el siguiente texto?

아리랑, 아리랑, 아라리요... 아리랑 고개로 넘어간다. 나를 버리고 가시는 님은 십리도 못가서 발병난다. 청천하늘엔 잔별도 많고, 우리네 가슴엔 희망도 많다. 저기 저 산이 백두산이라지, 동지 섣달에도 꽃만 핀다.

Coreano

3. ¿En qué idioma está el siguiente texto?

၁၉၄၀ ခုနှစ်တွင် ဗိုလ်ချုပ်အောင်ဆန်းဦးဆောင်သည့် ရဲဘော်သုံးကျိပ်အဖွဲ့ဝင်တို့သည် ဗမာ့လွတ်မြောက်ရေးတပ်မတော် (ဘီအိုင်အေ) ကို တည်ထောင်ခဲ့ကြသည်။[၂၀][၂၀] ရဲဘော်သုံးကျိပ်သည် ဂျပန်နိုင်ငံတွင် စစ်သင်တန်းများတက်ရောက်ခဲ့ကြသည်။[၂၀]

Birmano

4. ¿En qué idioma está el siguiente texto?

Negema wangu binti, mchachefu wa sanati upulike wasiati asa ukanzingatia. Maradhi yamenshika hatta yametimu mwaka sikupata kutamka neno lema kukwambia. Ndoo mbee ujilisi na wino na qaratasi moyoni nina hadithi nimependa kukwambia.

Suajili


5. ¿En qué idioma está el siguiente texto?

Այժմ նա յուր կինտոյի արհեստով ժառանգած Ճանճուր մականունը կցելով յուր հոր՝ Օհանեսի անվան հետ, կոչվում է «Թիֆլիսի պատվավոր քաղաքացի Ճանճուր Իվանիչ»։ Այդ անունով ևս մենք պարտավորվում ենք նրան ծանոթացնել մեր ընթերցողներին։

Armenio

6. ¿En qué idioma está el siguiente texto?

Belirli bir bölgedeki mevcut hava durumu hava raporu, gelecekte beklenen durumlar ise hava tahmini şeklinde, ilgili meteoroloji otoriteleri tarafından yayımlanır.

Turco

7. ¿En qué idioma está el siguiente texto?

ᎤᎵᏍᏔᏴᏗ ᎦᎵᏙᏗ ᏭᎷᏤᎢ, ᎤᏗᏔᎮ ᎦᏁᎲ, ᎤᏲᏏᏍᎩ ᎤᏗᏔᎮ ᎤᏅᏗ ᏃᎴ ᎤᎩᏍᏙᎡ ᏑᎾᎴ ᎠᎩᏍᏗ ᎤᏂᏑᎸᏓ. ᎣᏍᏓ ᏄᎵᏍᏔᏁᎮ ᎤᏩᏌ ᎤᏪᏅᏒ ᎡᏙᎲ. ᎦᏅᏆᎶᏍᏗ ᏭᏴᎮ ᏣᏄᏏ ᏃᎴ ᏣᏁᎳ ᎠᏂᏎᏂᏏ ᏴᎩ, ᎣᏍᏓ ᏄᏩᏁᎴ ᎠᏦᏴ.

Cheroqui

8. ¿En qué idioma está el siguiente texto?

ُیعتقد بأن ضابطة في الجیش البریطاني تدعى بریت تشاندي أصبحت أولامرأة من أصول آسیویة ُتكملُ رحلة استكشافیة فردیة عبر .القارة القطبیة الجنوبی  

Arabe

9. ¿En qué idioma está el siguiente texto?

ગુજરાતી સંસ્કૃત ભાષામાંથી વિકસિત થયેલી આધુનિક ઈન્ડો-આર્યન ભાષા છે. પરંપરાગત રીતે ૩ ઐતિહાસિક તબક્કાઓ પ્રમાણે ઈન્ડો-આર્યન ભાષાઓ વચ્ચે ભેદ કરાય છે.

Guyarati

10. ¿En qué idioma está el siguiente texto?

Al Seicento appartiene il primo trattato dedicato non ai volgari italiani o a uno o più di tali volgari, ma alla lingua italiana in quanto tale: Delle osservazioni della lingua italiana di Marcantonio Mambelli, detto il Cinonio.

Italiano

11. El siguiente texto fue escrito por Robert Burns en escocés. ¿Qué dice Lequel? ¿Qué falla? Justifica por qué ocurre lo que ocurre.

And there's a hand, my trusty fiere! and gie's a hand o' thine! And we’ll tak' a right gude-willie waught, for auld lang syne.

Lequel dice ingles pero uno de los motivos podria ser que el texro es muy corto y no tiene muchos trigramas y sus respectivas fecuencias para analizar y comparar. A su vez, hay que tener en cuenta que hay distintas "variantes" del escoces. Por un lado esta el Scottish English, es ingles estandar pero con acento y expresiones locales.Luego esta el Scots,germanico y el Gaelico Escoces,idioma celta.
El siguiente texto Lequel dice que esta en escocés y es Gaelico Escoces:

Tha foghlam na chòir do gach neach. Bithidh foghlam an asgaidh, co-dhiù aig na h-ìrean bunaiteil. Bithidh foghlam bunasach sparraichte air gach neach. Bithidh foghlam teicneachail, proifeiseanta agus àrd fhoghlam air bonn airidheachd, co-ionnan fosgailte do na h-uile neach.
2) Bithidh foghlam ag amas air làn-leasachadh pearsa an duine agus a chum neartachaidh tlachd ann an còirichean agus saorsan daonna. Bithidh foghlam a' brosnachadh tuigseachd, foighidinn agus càirdeas am measg dhùthchannan, am measg bhuidhnean cinneadail is cràbhach, còmhla ri a bhith a' cur air adhart oidhirpean nan Dùthchannan Aonaichte a thaobh cumail na sìthe.
3) Tha còir o thùs aig pàrantan roghainn a dhèanamh den t-seòrsa foghlaim a tha freagarrach don cloinn.
Bonn 27.
1) 'S e còir nan uile compàirt a bhith aca ann am beatha chultarail an coimhearsnachd fhein, a bhith sòlasach anns na h-ealain is roinn a bhith aca anns gach maitheas a shruthas bho gach adhartas saidheansail.
2) Tha gach neach còireach air dìon a bhith air na sochairean moralta agus saoghalta a tha a' sruthadh bho obair saidheansail, litreachail neo dealbhach ris am bheil e fhein


El texto de la pregunta 11 es Scots y a menudo se confude con el Scottish English ya que tienen la misma raiz. Ahora, tiene mas en comun con el Scottish English que con el Gaelico. De hecho, le enviamos al Lequel un texto en Scots mucho mas largo e igualmente dice que es ingles, esto confirma nuestra ultima idea y descarta la primera que tuvimos: que puede deberse al largo del texto.Adjunto texto enviado para corroborar. Entonced Lequel toma como escocés al Gaelico Escoces.

Is Written Scots a Foreign Language tae Maist Hamelt Scots Speakers?

SOME fowk that’s juist been gien a copy o this news letter for the first time, haes come richt oot wi it. “That’s nae guid tae me, it’s ower hard tae read!” Monie o the 1.5m tae 2.5m hamelt Scots speakers identified bi different surveys in raicent years carries the norrie in thair heids that Scots is somethin a bit mair fantoosh nor the wey that they speak; sae fantoosh in fack, that maist o thaim canna unnerstaun it when they see it written doon. Is it onie wunner then that maist o thaim acceps the wey they speak as juist some kinna local workin cless slang juist like they war telt in the schuil.

Upsteerin Scots screivers, blythe tae write in Scots but maistlins haudin back frae the speakin o’t, warsle wi orra spellins an aft losses sicht o the monie words that’s shared atween Scots an English. This mistaen fecht tae fund a Scots word tae uise insteid o whit’s perceived tae be an English ane whiles ends up wi a language that, tho recognised bi Scots scholars as a form o Scots, is aft a language that haes never ever been spoken in Scotland an isna recognised bi the hamelt Scots speaker, uneddicatit in the readin o Scots an never hivin heard the writers speakin it. They’re no gaun tae mak a maucht tae lairn hou tae read a language that, on paper, leuks naethin like the wey they speak ilka day. They haed nae sic bother wi readin Oor Wullie or The Broons, e’en in the first hauf o the last century whan the Scots uised then wis a lang sicht braider nor the wattered doon language that’s uised the day.

Naebody the day is gaun tae propone gaun back tae thon kinna spellins an language but the’r a muckle want for written Scots tae be makit a guid bit mair reader freendly if the’r tae be onie kinna mellin an mutual recognition atween the speakers an screivers o the leid. “Forgotten Folk” is weel aquent wi this kinch an it’s ane that shuid be addressed bi aw Scots upsteerers for it’s weel kent a sindert hoose canna staund an the Scots language o the 21t century will never be hail or the twa haufs comes thegither.


12. El siguiente texto está en inglés. ¿Qué dice Lequel? ¿Qué falla? Justifica por qué ocurre lo que ocurre.

IT WAS THE BEST OF TIMES, IT WAS THE WORST OF TIMES,
IT WAS THE AGE OF WISDOM, IT WAS THE AGE OF FOOLISHNESS,
IT WAS THE EPOCH OF BELIEF, IT WAS THE EPOCH OF INCREDULITY,
IT WAS THE SEASON OF LIGHT, IT WAS THE SEASON OF DARKNESS,
IT WAS THE SPRING OF HOPE, IT WAS THE WINTER OF DESPAIR,
WE HAD EVERYTHING BEFORE US, WE HAD NOTHING BEFORE US,
WE WERE ALL GOING DIRECT TO HEAVEN, WE WERE ALL GOING DIRECT THE OTHER WAY
– IN SHORT, THE PERIOD WAS SO FAR LIKE THE PRESENT PERIOD, THAT SOME OF ITS NOISIEST AUTHORITIES INSISTED ON ITS BEING RECEIVED, FOR GOOD OR FOR EVIL, IN THE SUPERLATIVE DEGREE OF COMPARISON ONLY.

Lequel dice Afrikaans.
Las key(trigramas) que se guardan en el perfil de trigramas tambien estan en mayuscula  (lo corroboramos imprimiendo los trigramas generados) y entonces cuando se calcula la similitud coseno y los trigramas de la base de datos estan en minusculas, no se hace correctamente y por eso detecta ese lenguaje.Para corroborar nuestra hipotesis, antes de usar la funcion substr, usamos una funcion que convierte esa linea de texto de mayusculas a minusculas:
      
       std::transform(unicodeString.begin(), unicodeString.end(), unicodeString.begin(), ::tolower);
de la libreria <algorithm>.
Entonces, ahora si funciona correctamente y ,cuando le enviamos ese texto, Lequel dice que es ingles.


CICLO FOR EN LA LINEA 43 ARCHIVO Lequel.cpp
La condicion de finalizacion del ciclo for y un esquema del funcionamiento general de la funcion buildTrigramProfile estan explicadas de manera grafica en la siguiente imagen:

![ESQUEMA](https://github.com/user-attachments/assets/47d8e6aa-250d-4f30-9a5b-b2313befebe5)
Como se puede observar, en la condicion del for buscamos que se colecten trigramas hasta llegar al penultimo caracter, vinculando el largo del string con el lugar fuera del string que se tomaria en cuenta sin esta condicion.
Luego, para aumentar la frecuencia de aparicion de un trigrama, usamos la notacion entre corchetes para asi evitar recorrer el mapa y comparar cada key con el trigrama actual. Si la key no existiera, es decir, el trigrama aun nunca antes habia aparecido, lo crea y modifica su value(su frecuencia) a uno.

CICLO FOR EN LA LINEA 92 ARCHIVO Lequel.cpp
El iterador pair apunta a cada elemento de textprofile (el perfil que fue creado por nosotros) y no a cada uno de languageProfile(un perfil de un idioma de la base de datos) ya que ahorra entradas al for si nuestro perfil de trigramas tiene menos que con el que lo estamos comparando. Entonces entrara tantas veces como trigramas tenga nuestro perfil, haciendolo asi mas eficiente.
Optamos por usar find en vez de comparar el trigrama actual contra cada uno de languageProfile hasta encontrar una similitud o recorrerlo completamente ya que find usa una funcion hash (tranforma una clave en un numero fijo) para saltar al "bucket" correspondiente con un tiempo promedio de O(1) (va directo usando el numero fijo como ubicacion) mientras que la busqueda manual recorre lugar por lugar.

COMPARACION LINEA 123 ARCHIVO Lequel.cpp
Optamos por comparar con el anterior y , si el valor actual es mayor guardar ese valor como nuevo maximo y ese lenguage asociado como el posibile detectado, ya  que mas eficiente que calcular la similitud coseno de nuestro lenguage contra cada uno del diccionario y luego compararlos. Eso implicaria el uso de muchas mas variables y operaciones que las que realizamos implementando esta logica.

## Bonus points
SIMILITUD COSENO:


****************hacer*******************************


CUELLO DE BOTELLA COMPUTACIONAL:
Las conversiones de UTF - 8 string a wstring y viceversa son cuellos de botella si son muy largos los textos ya que son conversiones de O(n). El calculo de las sumas al cudradado de la funcion normalizeTrigramProfile tambien.
Finalmente,el bucle que recorre cada linea y que dentro esta la funcion subtr que toma de a tres caracteres hasta llegar al anteultimo de dicha linea, es uno de los cuellos de botella mas significativos y con mayor costo computacional a medida que el tamaño del texto aumenta.La razón principal es que substr crea una nueva cadena cada vez que se invoca, lo que implica una asignación de memoria y copias de datos.Para solucionar este problema pensamos que se podria remplazar la linea 45 por el siguiente codigo:

                                            for (int it=n;it<n+3);it++)
                                            {
                                              trigramKey+= unicodeString.substr(n,3);
                                            }

Por otro lado, usando find(), que hace uso de hash, se disminuye notablemente el tiempo que toma la funcion getCosineSimilarity en ejecutarse. Gracias a dicha funcion consideramos que logramos prevenir un posible cuello de botella.

